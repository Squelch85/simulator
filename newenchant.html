<!DOCTYPE html>
<html lang="ko" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-store">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>ì‹ ì¶• ê¸°ìˆ ë¶€ì—¬ ê°œëŒ€ê°’</title>
  <style>
    :root {
      --bg-color: #f4f4f4;
      --text-color: #000000;
      --container-bg: #ffffff;
      --border-color: #dddddd;
      --control-bg: #eeeeee;
      --control-hover: #dddddd;
      --shadow: rgba(0,0,0,0.1);
    }
    html.dark {
      --bg-color: #121212;
      --text-color: #e0e0e0;
      --container-bg: #1e1e1e;
      --border-color: #333333;
      --control-bg: #2c2c2c;
      --control-hover: #3a3a3a;
      --shadow: rgba(0,0,0,0.5);
    }
    body {
      background: var(--bg-color);
      color: var(--text-color);
      font-family: sans-serif;
      padding: 2rem;
    }
    table { border-collapse: collapse; width: 100%; max-width: 600px; margin-bottom: 1rem; }
    th, td { border: 1px solid var(--border-color); padding: .5rem; text-align: center; }
    select { width: 100%; padding: .3rem; background: var(--control-bg); color: var(--text-color); border: 1px solid var(--border-color); }
    button { padding: .6rem 1.2rem; font-size: 1rem; background: var(--control-bg); color: var(--text-color); border: 1px solid var(--border-color); cursor: pointer; }
    button:hover { background: var(--control-hover); }
    #result p { margin: .3rem 0; }
    @media (max-width: 600px) {
      table, thead, tbody, th, td, tr { display: block; }
      th { position: absolute; top: -9999px; left: -9999px; }
      tr { margin: .5rem 0; }
      td { border: none; position: relative; padding-left: 50%; text-align: left; }
      td:before { position: absolute; top: 0; left: 0; width: 45%; padding-right: .5rem; white-space: nowrap; content: attr(data-label); font-weight: bold; }
    }
    .theme-toggle { position: absolute; top: 10px; right: 10px; }
    .theme-btn { background: none; border: none; font-size: 1.5rem; color: var(--text-color); cursor: pointer; }
    footer { text-align: center; font-size: 0.8rem; color: var(--text-color); margin-top: 1rem; }
  </style>
</head>
<body>
  <div class="theme-toggle"><button id="toggleTheme" class="theme-btn">ğŸŒ™</button></div>
  <h1>ì‹ ì¶• ê¸°ìˆ ë¶€ì—¬ ê°œëŒ€ê°’</h1>
  <table>
    <thead>
      <tr><th>ë‹¨ê³„</th><th>ì¼ë°˜ ì˜µì…˜</th><th>ì¶”ê°€ ì˜µì…˜</th></tr>
    </thead>
    <tbody>
      <tr><td data-label="ë‹¨ê³„">1ë‹¨ê³„</td><td data-label="ì¼ë°˜ ì˜µì…˜"><select id="s1-primary"></select></td><td data-label="ì¶”ê°€ ì˜µì…˜"><select id="s1-additional"></select></td></tr>
      <tr><td data-label="ë‹¨ê³„">2ë‹¨ê³„</td><td data-label="ì¼ë°˜ ì˜µì…˜"><select id="s2-primary"></select></td><td data-label="ì¶”ê°€ ì˜µì…˜"><select id="s2-additional"></select></td></tr>
      <tr><td data-label="ë‹¨ê³„">3ë‹¨ê³„</td><td data-label="ì¼ë°˜ ì˜µì…˜"><select id="s3-primary"></select></td><td data-label="ì¶”ê°€ ì˜µì…˜"><select id="s3-additional"></select></td></tr>
    </tbody>
  </table>
  <button id="calc-btn">ê³„ì‚°í•˜ê¸°</button>
  <div id="result"></div>

  <script>
    const data = {
      "1": {
        primary: [
          {name:"ë¶ˆê½ƒ ì €í•­", value:2, prob:6.46, grade:"ê³ ê¸‰"}, {name:"ë¶ˆê½ƒ ì €í•­", value:3, prob:5.95, grade:"í¬ê·€"},
          {name:"ë¶ˆê½ƒ ì €í•­", value:5, prob:2.55, grade:"ì˜ì›…"}, {name:"ë¶ˆê½ƒ ì €í•­", value:8, prob:2.04, grade:"ì „ì„¤"},
          {name:"íŒŒë„ ì €í•­", value:2, prob:6.46, grade:"ê³ ê¸‰"}, {name:"íŒŒë„ ì €í•­", value:3, prob:5.95, grade:"í¬ê·€"},
          {name:"íŒŒë„ ì €í•­", value:5, prob:2.55, grade:"ì˜ì›…"}, {name:"íŒŒë„ ì €í•­", value:8, prob:2.04, grade:"ì „ì„¤"},
          {name:"ëŒí’ ì €í•­", value:2, prob:6.46, grade:"ê³ ê¸‰"}, {name:"ëŒí’ ì €í•­", value:3, prob:5.95, grade:"í¬ê·€"},
          {name:"ëŒí’ ì €í•­", value:5, prob:2.55, grade:"ì˜ì›…"}, {name:"ëŒí’ ì €í•­", value:8, prob:2.04, grade:"ì „ì„¤"},
          {name:"ë°”ìœ„ ì €í•­", value:2, prob:6.46, grade:"ê³ ê¸‰"}, {name:"ë°”ìœ„ ì €í•­", value:3, prob:5.95, grade:"í¬ê·€"},
          {name:"ë°”ìœ„ ì €í•­", value:5, prob:2.55, grade:"ì˜ì›…"}, {name:"ë°”ìœ„ ì €í•­", value:8, prob:2.04, grade:"ì „ì„¤"},
          {name:"ë²ˆê°œ ì €í•­", value:2, prob:6.46, grade:"ê³ ê¸‰"}, {name:"ë²ˆê°œ ì €í•­", value:3, prob:5.95, grade:"í¬ê·€"},
          {name:"ë²ˆê°œ ì €í•­", value:5, prob:2.55, grade:"ì˜ì›…"}, {name:"ë²ˆê°œ ì €í•­", value:8, prob:2.04, grade:"ì „ì„¤"}
        ],
        additional: [
          {name:"ëª…ì¤‘", value:2, prob:6.46, grade:"ê³ ê¸‰"}, {name:"ëª…ì¤‘", value:3, prob:5.95, grade:"í¬ê·€"},
          {name:"ëª…ì¤‘", value:5, prob:2.55, grade:"ì˜ì›…"}, {name:"ëª…ì¤‘", value:7, prob:2.04, grade:"ì „ì„¤"}
        ]
      },
      "2": {
        primary: [
          {name:"ë°›ëŠ” ì¹˜ìœ ëŸ‰", value:17, prob:6.46, grade:"ê³ ê¸‰"}, {name:"ë°›ëŠ” ì¹˜ìœ ëŸ‰", value:20, prob:5.95, grade:"í¬ê·€"},
          {name:"ë°›ëŠ” ì¹˜ìœ ëŸ‰", value:30, prob:2.55, grade:"ì˜ì›…"}, {name:"ë°›ëŠ” ì¹˜ìœ ëŸ‰", value:50, prob:2.04, grade:"ì „ì„¤"},
          {name:"ë°›ëŠ” ì¹˜ìœ ìœ¨", value:3, prob:6.46, grade:"ê³ ê¸‰"}, {name:"ë°›ëŠ” ì¹˜ìœ ìœ¨", value:4, prob:5.95, grade:"í¬ê·€"},
          {name:"ë°›ëŠ” ì¹˜ìœ ìœ¨", value:6, prob:2.55, grade:"ì˜ì›…"}, {name:"ë°›ëŠ” ì¹˜ìœ ìœ¨", value:10, prob:2.04, grade:"ì „ì„¤"},
          {name:"ëª¨ë“  ì†ì„± ì €í•­", value:2, prob:6.46, grade:"ê³ ê¸‰"}, {name:"ëª¨ë“  ì†ì„± ì €í•­", value:3, prob:5.95, grade:"í¬ê·€"},
          {name:"ëª¨ë“  ì†ì„± ì €í•­", value:5, prob:2.55, grade:"ì˜ì›…"}, {name:"ëª¨ë“  ì†ì„± ì €í•­", value:8, prob:2.04, grade:"ì „ì„¤"},
          {name:"ì¼ë°˜ ê³µê²©ë ¥ ì €í•­", value:2, prob:6.46, grade:"ê³ ê¸‰"}, {name:"ì¼ë°˜ ê³µê²©ë ¥ ì €í•­", value:3, prob:5.95, grade:"í¬ê·€"},
          {name:"ì¼ë°˜ ê³µê²©ë ¥ ì €í•­", value:5, prob:2.55, grade:"ì˜ì›…"}, {name:"ì¼ë°˜ ê³µê²©ë ¥ ì €í•­", value:8, prob:2.04, grade:"ì „ì„¤"},
          {name:"ê¸°ìˆ  ê³µê²©ë ¥ ì €í•­", value:2, prob:6.46, grade:"ê³ ê¸‰"}, {name:"ê¸°ìˆ  ê³µê²©ë ¥ ì €í•­", value:3, prob:5.95, grade:"í¬ê·€"},
          {name:"ê¸°ìˆ  ê³µê²©ë ¥ ì €í•­", value:5, prob:2.55, grade:"ì˜ì›…"}, {name:"ê¸°ìˆ  ê³µê²©ë ¥ ì €í•­", value:8, prob:2.04, grade:"ì „ì„¤"}
        ],
        additional: [
          {name:"ë°©ì–´ë ¥", value:2, prob:6.46, grade:"ê³ ê¸‰"}, {name:"ë°©ì–´ë ¥", value:3, prob:5.95, grade:"í¬ê·€"},
          {name:"ë°©ì–´ë ¥", value:5, prob:2.55, grade:"ì˜ì›…"}, {name:"ë°©ì–´ë ¥", value:7, prob:2.04, grade:"ì „ì„¤"}
        ]
      },
      "3": {
        primary: [
          {name:"ë¬¼ì•½ íšŒë³µë¥ ", value:3, prob:8.075, grade:"ê³ ê¸‰"}, {name:"ë¬¼ì•½ íšŒë³µë¥ ", value:4, prob:7.4375, grade:"í¬ê·€"},
          {name:"ë¬¼ì•½ íšŒë³µë¥ ", value:6, prob:3.1875, grade:"ì˜ì›…"}, {name:"ë¬¼ì•½ íšŒë³µë¥ ", value:10, prob:2.55, grade:"ì „ì„¤"},
          {name:"ì—°ì‡„ í”¼í•´ ì €í•­", value:2, prob:8.075, grade:"ê³ ê¸‰"}, {name:"ì—°ì‡„ í”¼í•´ ì €í•­", value:3, prob:7.4375, grade:"í¬ê·€"},
          {name:"ì—°ì‡„ í”¼í•´ ì €í•­", value:4, prob:3.1875, grade:"ì˜ì›…"}, {name:"ì—°ì‡„ í”¼í•´ ì €í•­", value:7, prob:2.55, grade:"ì „ì„¤"},
          {name:"ê´€í†µ í”¼í•´ ì €í•­", value:2, prob:8.075, grade:"ê³ ê¸‰"}, {name:"ê´€í†µ í”¼í•´ ì €í•­", value:3, prob:7.4375, grade:"í¬ê·€"},
          {name:"ê´€í†µ í”¼í•´ ì €í•­", value:4, prob:3.1875, grade:"ì˜ì›…"}, {name:"ê´€í†µ í”¼í•´ ì €í•­", value:7, prob:2.55, grade:"ì „ì„¤"}
        ],
        additional: [
          {name:"í”¼í•´ ê°ì†Œ", value:3, prob:8.075, grade:"ê³ ê¸‰"}, {name:"í”¼í•´ ê°ì†Œ", value:4, prob:7.4375, grade:"í¬ê·€"},
          {name:"í”¼í•´ ê°ì†Œ", value:6, prob:3.1875, grade:"ì˜ì›…"}, {name:"í”¼í•´ ê°ì†Œ", value:10, prob:2.55, grade:"ì „ì„¤"}
        ]
      }
    };

    const gradeColor = {"ê³ ê¸‰":"#8BC34A","í¬ê·€":"#2196F3","ì˜ì›…":"#F44336","ì „ì„¤":"#FFC107"};

    function fill(id, list) {
      const sel = document.getElementById(id);
      sel.innerHTML = "";
      sel.append(new Option("ì„ íƒì•ˆí•¨",""));
      list.slice().sort((a,b)=>{ const na=a.name, nb=b.name; return na===nb ? a.value-b.value : na.localeCompare(nb,'ko'); })
          .forEach(o=>{
        const opt=new Option(`${o.name} ${o.value}`,o.prob);
        opt.style.color=gradeColor[o.grade]||'var(--text-color)'; sel.append(opt);
      });
    }

    window.addEventListener('DOMContentLoaded', ()=>{
      ['1','2','3'].forEach(s=>{
        fill(`s${s}-primary`, data[s].primary);
        fill(`s${s}-additional`, data[s].additional);
      });
    });

    document.getElementById('calc-btn').addEventListener('click',()=>{
      const picks=[];
      ['1','2','3'].forEach(s=>{ ['primary','additional'].forEach(type=>{
        const sel=document.getElementById(`s${s}-${type}`);
        if(sel.value) picks.push(data[s][type].find(x=>x.prob===parseFloat(sel.value)));
      }); });
      if(!picks.length) return alert('ì˜µì…˜ì„ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ ì£¼ì„¸ìš”.');
      const totalProb=picks.reduce((a,p)=>a*(p.prob/100),1);
      const expected=(1/totalProb).toFixed(2);
      let html='';
      picks.forEach(p=>{
        html+=`<p style="color:${gradeColor[p.grade]}">ë“±ê¸‰: ${p.grade} â€“ ${p.name} ${p.value} (${p.prob}%)</p>`;
      });
      html+=`<hr><p>ì „ì²´ í™•ë¥ : ${(totalProb*100).toFixed(4)}%</p>`;
      html+=`<p><strong>ê¸°ëŒ€ ì‹œë„ íšŸìˆ˜: ${expected} íšŒ</strong></p>`;
      document.getElementById('result').innerHTML=html;
    });
    document.getElementById('toggleTheme').addEventListener('click', () =>
      document.documentElement.classList.toggle('dark'));
  </script>
  <footer><small>ë²„ì „ v1.3.16</small></footer>
</body>
</html>
