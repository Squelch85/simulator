<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>6월 선물 시뮬레이터</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="🎁 6월 선물 시뮬레이터">
  <meta property="og:description" content="확률형 아이템 뽑기 결과를 모바일/PC 최적화 UI로 확인해 보세요!">
  <meta property="og:image" content="https://your.domain/path/to/preview.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <style>
    html, body {margin:0; padding:0; min-height:100%; background:#1e1e1e; color:#eee; font-family:'Segoe UI', sans-serif;}
    .container {max-width:600px; margin:auto; padding:12px; display:flex; flex-direction:column; height:100vh;}
    h3 {text-align:center; font-size:1.4em; margin:12px 0;}
    .control {display:flex; flex-wrap:wrap; justify-content:center; align-items:center; gap:8px; margin-bottom:12px;}
    .control button, .control input[type=number] {font-size:1rem; padding:6px 12px; border-radius:4px; border:none; background:#333; color:#eee;}
    .control button:active {transform:scale(0.98);}
    .control .reset {background:#a00;}
    .blink {animation:blink 1s infinite alternate;}
    @keyframes blink {from{opacity:1;} to{opacity:0.2;}}
    /* 높이를 이전 60vh에서 30% 증가한 78vh로 설정 */
    .scroll-area {max-height:78vh; overflow-y:auto;}
    table {width:100%; border-collapse:collapse; font-size:0.9rem;}
    th, td {padding:8px; border:1px solid #444; text-align:center; font-weight:500;}
    th {background:#2a2a2a;}
  </style>
</head>
<body>
  <div class="container">
    <h3>🎁 6월 선물 시뮬레이터</h3>
    <div class="control">
      <button id="minus5">-5</button>
      <button id="minus1">-1</button>
      <input type="number" id="tries" value="100" min="1" max="10000">
      <button id="plus1">+1</button>
      <button id="plus5">+5</button>
      <button id="reset" class="reset">초기화</button>
      <button id="run">실행</button>
    </div>
    <div class="scroll-area">
      <table>
        <thead>
          <tr><th>아이템</th><th>확률%</th><th>기대</th><th>실제</th></tr>
        </thead>
        <tbody id="resultBody"></tbody>
      </table>
    </div>
  </div>
  <script>
    const maxTries = 10000;
    const input = document.getElementById('tries');
    ['minus5','minus1','plus1','plus5'].forEach(id=>{
      document.getElementById(id).addEventListener('click', ()=>{
        let v = parseInt(input.value)||0;
        const delta = id.includes('minus') ? -parseInt(id.replace('minus','')) : parseInt(id.replace('plus',''));
        v = Math.min(Math.max(v + delta, 1), maxTries);
        input.value = v;
        if(v===maxTries) input.classList.add('blink'); else input.classList.remove('blink');
      });
    });
    document.getElementById('reset').addEventListener('click', ()=>{
      input.value = 100; input.classList.remove('blink');
    });
    document.getElementById('run').addEventListener('click', runSimulation);

    const itemTable = [ /* ... same items array ... */ ];
    function getColor(rate){ if(rate<=0.01) return '#c678dd'; if(rate<=0.1) return '#ff9900'; if(rate<=0.5) return '#fcd303'; if(rate<=3) return '#ff5555'; if(rate<=10) return '#55aaff'; if(rate<=25) return '#aaa'; return '#fff'; }

    function runSimulation(){
      const tries = Math.min(Math.max(parseInt(input.value)||1,1),maxTries);
      const results = {};
      itemTable.forEach(item=>results[item.name]=0);
      for(let i=0;i<tries;i++){
        let r=Math.random()*100, cum=0;
        for(let item of itemTable){ cum+=item.rate; if(r<=cum){ results[item.name]++; break; }}
      }
      const frag = document.createDocumentFragment();
      const sorted = [...itemTable].sort((a,b)=> results[b.name]-results[a.name] || a.rate-b.rate);
      sorted.forEach(item=>{
        const tr = document.createElement('tr');
        ['name','rate','expected','actual'].forEach((key,idx)=>{
          const td = document.createElement('td');
          if(key==='name'){ td.textContent=item.name; td.style.color=getColor(item.rate); }
          if(key==='rate') td.textContent=item.rate.toFixed(3);
          if(key==='expected') td.textContent=((item.rate/100)*tries).toFixed(1);
          if(key==='actual') td.textContent=results[item.name];
          tr.appendChild(td);
        });
        frag.appendChild(tr);
      });
      const tbody = document.getElementById('resultBody'); tbody.innerHTML=''; tbody.appendChild(frag);
    }
  </script>
</body>
</html>
